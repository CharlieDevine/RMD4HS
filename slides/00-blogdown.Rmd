---
title: "Blogdown > GitHub Pages"
author: Heidi Steiner
output:
  xaringan::moon_reader:
    css: ["default", "assets/my-theme.css", "assets/my-fonts.css"]
    seal: false 
    lib_dir: libs
    nature:
      highlightStyle: github
      slideNumberFormat: "" 
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      beforeInit: "https://platform.twitter.com/widgets.js"
    includes:
      in_header: assets/header.html  
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE, 
  comment = NA, dpi = 300)
library(magick)
library(tidyverse)
library(countdown)
```

class: title-slide, top, left
background-image: url(images/hugoCover.jpeg)
background-position: top

# `r rmarkdown::metadata$title`

### `r rmarkdown::metadata$author`



.footnote[
All content is [RStudio Education](https://github.com/rstudio-education/), CC-BY. 
]




---
class: inverse, middle, center

# What is blogdown?

An <i class="fab fa-r-project"></i> package...

--

that lets you create websites in 

<img src="assets/RStudio-Logo-White.png" width = "15%">


---
class: center, middle

```{r out.width="90%", echo = FALSE}
knitr::include_graphics("assets/bonus.jpg")
```


# .shout[You can use R Markdown!]



---
background-image: url(assets/amber.png)
background-size: contain

---
background-image: url(assets/openscapes.png)
background-size: contain

---
background-image: url(assets/earo.png)
background-size: contain

---
background-image: url(assets/malcolm.png)
background-size: contain

---
background-image: url(assets/alison.png)
background-size: contain
  
---
background-image: url(assets/emi-showcase.gif)
background-size: cover


General idea:  

#### Users already have an existing repo on GitHub and want to add a .RMD hosted Hugo themed website to the directory  



### 1. Update code from GitHub

Pull changes, re-download the zip, or create new project on RStudio (or cloud)... does not matter how you get there just that you can! 

### 2. Create `docs/` and `website/` directories within project root 

```{r}
dir.create("website")
dir.create("docs")
```

### 3. Create `.noyekyll` within  `docs/` with `file.create('../docs/.nojekyll')` 

This will stop GitHub from being confused that we're using Hugo 

**HINT**: Use `ls -a docs/` to double check your `.nojekyll` file was made 

### 4. Prep GitHub repo for page documents 

- Go to `Settings` in your github repo 
- Select `Pages` on the guide on the left of the screen
- Change `Branch` from none to `main` (or `master`) 
- Change repo from root to `docs/`
- Save & Refresh
- Copy the url made for your repo

### 5. Navigate into the `website/` directory

```{r}
setwd("website/")
```

We will be copying the `website/public/` to `docs/` and pushing `docs/` to GitHub when we're ready.  

### 6. Create a blogdown website! 

```{r}
blogdown::new_site()
```

### 7. Change base url in `config.yaml` to new github pages url 

Paste the url in `config.yaml` as the key to the `baseurl` value

### 8. Add `website/` to `.gitignore` 

Create (or add to an existing `.gitignore`) in the root project. Include all the website materials in the `.gitignore` for now. We don't need to have our website creation materials be public, just the final posts.


### 9. `blogdown::build_site()` prior to pushing to GitHub

Building the site will create a `public/` directory within `website/` which we want to copy to `root_project/docs/` to push to GitHub. 

### 10. Copy contents of new `public/` folder to `../docs/` 

This is a manual process so I doubt this is the most efficient way, but this works! 


```{bash}
cp -r website/public/* docs/
```
**NOTE**: I used the terminal for this! 

### 11. Push to existing GitHub repo (or some other upload)

Does `docs/` show up in your changes? 

**HINT**: If you're on the cloud, you need to first tell Git who you are! Try:
```{bash}
git config --global user.email "you@example.com"
```


### Extra Time. Download new theme and update as desired! 

[A complete list of Hugo themes](https://themes.gohugo.io/)  
[More common (aka more likely to work) Hugo themes via Wowchemy](https://wowchemy.com/hugo-themes/)



---

# This is a Hugo site

```{r out.width="90%", echo = FALSE}
knitr::include_graphics("images/folder-structure.png")
```

---

# This is the content folder

.pull-left[
```{r out.width="90%", echo = FALSE}
knitr::include_graphics("images/content-structure.png")
```
]

.pull-right[

+ Hugo calls these "sections"
+ Every section has a "page" (usually singular)

]


---

# This is the home folder

.pull-left[
In the academic theme, these are *widgets*:

+ Portable! Move the `widget.md` file to any other [page](https://sourcethemes.com/academic/docs/managing-content/#create-a-widget-page)
+ Configurable! Think: Mr. Potato Head

]

.pull-right[

```{r echo = FALSE}
fs::dir_tree(path = "/Users/alison/rsites/kellykapowski/content/home", recurse = FALSE, all = TRUE)
```

]

---
class: inverse, middle, center

# Widgets

![](https://media.giphy.com/media/3orifd2IjZjWVkpC4o/giphy.gif)

---
class: inverse, middle, center

# Edit your home page

Pick your widgets- I suggest leaving them all in place but setting `active = FALSE` to remove any.


If you delete, they are always in: `themes/hugo-academic/exampleSite/content/home`

```{r echo = FALSE}
countdown(minutes = 5, play_sound = TRUE)
```


Bonus: move a widget to another [page](https://sourcethemes.com/academic/docs/managing-content/#create-a-widget-page). You could, for example, have the `about.md` widget be the **only** active widget on the home page.

# Go Deeper

Read more of the [docs](https://sourcethemes.com/academic/docs/page-builder/#personalizing-widgets) for personalizing widgets.


---
class: inverse, middle, center

# `r emo::ji("sparkles")` Quiz! `r emo::ji("sparkles")`

```{r echo = FALSE}
countdown(minutes = 2, play_sound = TRUE)
```

What happens if you edit `public/` directly, or delete the folder altogether, then serve the site again? 


Hint: try it! `r emo::ji("fire")`


---
class: inverse, middle, center

# `r emo::ji("sparkles")` Trick question `r emo::ji("sparkles")`

```{r echo = FALSE}
countdown(minutes = 0, seconds = 15, play_sound = TRUE)
```

Should you ever edit files in the `public/` directory?


